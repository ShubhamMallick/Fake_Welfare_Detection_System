<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fraud Detection Pipeline - Prayatna</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

<style>
/* ---------- GLOBAL ---------- */
body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    margin: 0;
    background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
    min-height: 100vh;

    opacity: 0;
    transform: translateY(40px);
    animation: pageFade 1.2s ease forwards;
}
@keyframes pageFade {
    to { opacity: 1; transform: translateY(0); }
}

/* ---------- NAVBAR ---------- */
.navbar {
    position: sticky;
    top: 0;
    z-index: 1000;
    background: rgba(255,255,255,0.75);
    backdrop-filter: blur(14px);
    box-shadow: 0 8px 25px rgba(0,0,0,0.15);

    opacity: 0;
    transform: translateY(-60px);
    animation: navbarDrop 1s ease forwards;
}
@keyframes navbarDrop {
    to { opacity: 1; transform: translateY(0); }
}

.nav-container {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 14px 22px;
}

.logo {
    font-size: 20px;
    font-weight: bold;
    color: #fb2d62;
    display: flex;
    align-items: center;
    gap: 8px;
    transition: 0.3s;
}
.logo:hover { transform: scale(1.05); }

.nav-links { display: flex; gap: 25px; }

.nav-item {
    position: relative;
    text-decoration: none;
    font-weight: 600;
    color: #333;
    transition: 0.3s;
}
.nav-item::after {
    content: "";
    position: absolute;
    left: 0;
    bottom: -4px;
    width: 0%;
    height: 3px;
    background: linear-gradient(45deg,#ff9a56,#fb2d62);
    transition: 0.3s;
}
.nav-item:hover { color: #fb2d62; }
.nav-item:hover::after,
.nav-item.active::after { width: 100%; }
.nav-item.active { color: #fb2d62; }

/* ---------- MAIN ---------- */
main {
    max-width: 1100px;
    margin: 40px auto;
    background: rgba(255,255,255,0.95);
    padding: 25px;
    border-radius: 15px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.2);

    opacity: 0;
    transform: scale(0.9);
    animation: zoomIn 1s ease forwards;
    animation-delay: .2s;
}
@keyframes zoomIn { to { opacity:1; transform: scale(1); } }

/* ---------- INPUT + BUTTON ---------- */
input, button {
    width: 100%;
    padding: 12px;
    margin-top: 10px;
    border-radius: 8px;
    font-size: 15px;
}

button {
    background: linear-gradient(45deg,#ff9a56,#fb2d62);
    color: white;
    border: none;
    font-weight: bold;
    cursor: pointer;
    transition: .3s;
}
button:hover {
    transform: translateY(-3px) scale(1.03);
    box-shadow: 0 8px 25px rgba(255,90,120,0.5);
}

/* ---------- SECTIONS ---------- */
.section {
    margin-top: 25px;
    padding: 20px;
    border-radius: 12px;
    background: #f7f9fc;
    box-shadow: 0 4px 10px rgba(0,0,0,0.08);

    opacity: 0;
    transform: translateY(30px);
    animation: sectionFade .8s ease forwards;
}
@keyframes sectionFade {
    to { opacity:1; transform: translateY(0); }
}

/* ---------- FEATURES GRID ---------- */
.features-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit,minmax(220px,1fr));
    gap: 15px;
}

.feature-card {
    background: white;
    padding: 15px;
    border-radius: 10px;
    text-align: center;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    transition: .3s;
}
.feature-card:hover {
    transform: translateY(-5px);
}

/* ---------- LOADING ---------- */
.loading {
    text-align: center;
    font-weight: bold;
    color: #fb2d62;
    animation: pulse 1s infinite;
}
@keyframes pulse {
    0%,100% { opacity:1; }
    50% { opacity:.4; }
}

.error { color: red; }
</style>
</head>

<body>

<nav class="navbar">
<div class="nav-container">
<div class="logo"><i class="fas fa-shield-alt"></i> Prayatna</div>
<div class="nav-links">
<a href="/" class="nav-item">Home</a>
<a href="/dashboard" class="nav-item">Dashboard</a>
<a href="/pipeline-page" class="nav-item active">Pipeline</a>
<a href="/agentic" class="nav-item">Agentic AI</a>
</div>
</div>
</nav>

<main>

<h1>Fraud Detection Pipeline</h1>

<section class="intro">
    <h2>Overview</h2>
    <p>The Fraud Detection Pipeline is a comprehensive analytical tool designed to perform end-to-end fraud assessment on beneficiary data extracted from PDF documents. By integrating multiple AI-powered modules, it provides a holistic evaluation of potential fraudulent activities in welfare distribution systems.</p>

    <h2>Process Flow</h2>
    <ol>
        <li><i class="fas fa-file-upload"></i> <strong>Document Upload:</strong> Upload a PDF containing beneficiary information for analysis.</li>
        <li><i class="fas fa-brain"></i> <strong>Natural Language Processing (NLP):</strong> Extract and process key features from unstructured text data.</li>
        <li><i class="fas fa-chart-line"></i> <strong>Anomaly Detection:</strong> Identify statistical outliers and irregular patterns in transaction data.</li>
        <li><i class="fas fa-copy"></i> <strong>Duplicate Detection:</strong> Scan for identical or highly similar beneficiary records.</li>
        <li><i class="fas fa-network-wired"></i> <strong>Fraud Network Analysis:</strong> Examine relational networks to uncover organized fraud schemes and influential entities.</li>
    </ol>

    <h2>Requirements & Tips</h2>
    <ul>
        <li><strong>Document Format:</strong> Ensure the PDF includes structured beneficiary data such as names, addresses, and transaction amounts for optimal analysis.</li>
        <li><strong>Processing Time:</strong> Analysis duration varies based on document complexity and size; typically completes within seconds.</li>
        <li><strong>Output:</strong> Results are presented in categorized sections with detailed feature extractions for transparent review.</li>
    </ul>
</section>

<label for="pdfFile">Select PDF Document</label>
<input type="file" id="pdfFile" accept=".pdf">
<button onclick="runPipeline()">Run Pipeline</button>

<div id="result"></div>

</main>

<footer>
    2026 Prayatna Fraud Detection System
</footer>

<script>
function formatValue(v){
 if(v==null) return "‚Äî";
 if(typeof v==="object") return JSON.stringify(v,null,1);
 return v;
}

function renderFeatures(features){
 if(!features) return "<p>No data</p>";

 let html=`<div class="features-grid">`;
 for(const [k,v] of Object.entries(features)){
  html+=`<div class="feature-card">
           <h4>${k.replace(/_/g," ")}</h4>
           <p>${formatValue(v)}</p>
         </div>`;
 }
 html+="</div>";
 return html;
}

function renderSection(title,data){
 if(title === "ü§ñ Agentic Reasoning" && data && data.explanation && data.audit_summary){
  return `<div class="section">
           <h2>${title}</h2>
           <h3>AI Explanation</h3>
           <p>${data.explanation.replace(/\n/g,"<br>")}</p>
           <h3>Audit Summary</h3>
           <p>${data.audit_summary.replace(/\n/g,"<br>")}</p>
         </div>`;
 }
 return `<div class="section">
           <h2>${title}</h2>
           ${renderFeatures(data)}
         </div>`;
}

async function runPipeline(){
 const file=document.getElementById("pdfFile").files[0];
 const resultDiv=document.getElementById("result");

 if(!file){ alert("Select a PDF"); return; }

 const fd=new FormData();
 fd.append("file",file);

 resultDiv.innerHTML=`<p class="loading">Running fraud detection pipeline...</p>`;

 try{
  const res=await fetch("/pipeline",{method:"POST",body:fd});
  const data=await res.json();

  let html="";
  html+=renderSection("üìÑ NLP Extraction",data.nlp_extraction);
  html+=renderSection("üìä Anomaly Detection",data.anomaly_detection);
  html+=renderSection("üîÅ Duplicate Detection",data.duplicate_detection);
  html+=renderSection("üï∏ Fraud Network Analysis",data.fraud_network_analysis);
  html+=renderSection("ü§ñ Agentic Reasoning",data.agentic_reasoning);

  resultDiv.innerHTML=html;

 }catch(err){
  resultDiv.innerHTML=`<p class="error">${err.message}</p>`;
 }
}
</script>

</body>
</html>
